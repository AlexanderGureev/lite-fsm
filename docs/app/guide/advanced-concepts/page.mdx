# –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Ä–∞–±–æ—Ç—ã —Å `lite-fsm` –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∑–∞–¥–∞—á.

## –¢–∏–ø–∏–∑–∞—Ü–∏—è —Å TypeScript

`lite-fsm` –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å TypeScript –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–∏–ø–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:

```ts
import { createMachine, MachineManager } from "lite-fsm";
import type { CFG, FSMEvent } from "lite-fsm";

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π
type State = "IDLE" | "LOADING" | "SUCCESS" | "ERROR";

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π
type EventType = "FETCH" | "FETCH_SUCCESS" | "FETCH_ERROR" | "RESET";

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è —Å payload
type Event =
  | FSMEvent<"FETCH", void>
  | FSMEvent<"FETCH_SUCCESS", { data: any }>
  | FSMEvent<"FETCH_ERROR", { error: string }>
  | FSMEvent<"RESET", void>;

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
type Context = {
  data: any | null;
  error: string | null;
  loading: boolean;
};

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
type Config = CFG<
  {
    IDLE: { FETCH: "LOADING" };
    LOADING: { FETCH_SUCCESS: "SUCCESS"; FETCH_ERROR: "ERROR" };
    SUCCESS: { RESET: "IDLE" };
    ERROR: { RESET: "IDLE"; FETCH: "LOADING" };
  },
  Context,
  Event
>;

// –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∞ —Å —Å–∏–ª—å–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
const fetchMachine = createMachine<Config, Context, EventType, Event>({
  config: {
    IDLE: {
      FETCH: "LOADING",
    },
    LOADING: {
      FETCH_SUCCESS: "SUCCESS",
      FETCH_ERROR: "ERROR",
    },
    SUCCESS: {
      RESET: "IDLE",
    },
    ERROR: {
      RESET: "IDLE",
      FETCH: "LOADING",
    },
  },
  initialState: "IDLE",
  initialContext: {
    data: null,
    error: null,
    loading: false,
  },
  effects: {
    LOADING: async ({ transition }) => {
      try {
        const response = await fetch("https://api.example.com/data");
        const data = await response.json();
        // TypeScript –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è –∏ payload —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é
        transition({ type: "FETCH_SUCCESS", payload: { data } });
      } catch (error) {
        // TypeScript –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è –∏ payload —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é
        transition({
          type: "FETCH_ERROR",
          payload: { error: error instanceof Error ? error.message : String(error) },
        });
      }
    },
  },
});
```

## –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–æ–≤

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ —á–∞—Å—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤. `lite-fsm` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –∫–æ–º–ø–æ–∑–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç—ã —Å –ø–æ–º–æ—â—å—é `MachineManager`:

```ts
import { createMachine, MachineManager } from "lite-fsm";

// –ê–≤—Ç–æ–º–∞—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
const authMachine = createMachine({
  config: {
    LOGGED_OUT: {
      LOGIN: "LOGGING_IN",
    },
    LOGGING_IN: {
      LOGIN_SUCCESS: "LOGGED_IN",
      LOGIN_ERROR: "LOGIN_ERROR",
    },
    LOGGED_IN: {
      LOGOUT: "LOGGED_OUT",
    },
    LOGIN_ERROR: {
      RETRY: "LOGGING_IN",
      CANCEL: "LOGGED_OUT",
    },
  },
  initialState: "LOGGED_OUT",
  initialContext: {
    user: null,
    error: null,
  },
  // ...
});

// –ê–≤—Ç–æ–º–∞—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const userDataMachine = createMachine({
  config: {
    IDLE: {
      FETCH: "LOADING",
    },
    LOADING: {
      FETCH_SUCCESS: "LOADED",
      FETCH_ERROR: "ERROR",
    },
    LOADED: {
      REFRESH: "LOADING",
      CLEAR: "IDLE",
    },
    ERROR: {
      RETRY: "LOADING",
      CLEAR: "IDLE",
    },
  },
  initialState: "IDLE",
  initialContext: {
    data: null,
    error: null,
  },
  // ...
});

// –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞, –æ–±—ä–µ–¥–∏–Ω—è—é—â–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç—ã
const manager = MachineManager({
  auth: authMachine,
  userData: userDataMachine,
});

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
manager.setDependencies({
  services: {
    authService: {
      login: async (credentials) => {
        /* ... */
      },
      logout: async () => {
        /* ... */
      },
    },
    userService: {
      fetchUserData: async (userId) => {
        /* ... */
      },
    },
  },
});

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º–µ–∂–¥—É –∞–≤—Ç–æ–º–∞—Ç–∞–º–∏
manager.onTransition((prevState, nextState) => {
  // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –≤–æ—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –µ–≥–æ –¥–∞–Ω–Ω—ã–µ
  if (prevState.auth.state !== "LOGGED_IN" && nextState.auth.state === "LOGGED_IN" && nextState.auth.context.user) {
    manager.transition({
      type: "FETCH",
      machine: "userData", // –£–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–ª–µ–≤–æ–π –∞–≤—Ç–æ–º–∞—Ç
    });
  }

  // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—à–µ–ª, –æ—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ
  if (prevState.auth.state === "LOGGED_IN" && nextState.auth.state === "LOGGED_OUT") {
    manager.transition({
      type: "CLEAR",
      machine: "userData",
    });
  }
});
```

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ–¥—å—é—Å–µ—Ä—ã

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `lite-fsm` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç–æ–π —Ä–µ–¥—å—é—Å–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∞ –∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç payload —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º. –û–¥–Ω–∞–∫–æ –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–¥—å—é—Å–µ—Ä:

```ts
import { createMachine } from "lite-fsm";

const counterMachine = createMachine({
  config: {
    IDLE: {
      INCREMENT: null, // null –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
      DECREMENT: null,
      RESET: null,
    },
  },
  initialState: "IDLE",
  initialContext: {
    count: 0,
    history: [],
    lastUpdated: null,
  },
  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–¥—å—é—Å–µ—Ä
  reducer: (state, action, options) => {
    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
    const { state: currentState, context } = state;

    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
    switch (action.type) {
      case "INCREMENT":
        return {
          state: options.nextState || currentState,
          context: {
            ...context,
            count: context.count + (action.payload?.step || 1),
            history: [...context.history, { type: "INCREMENT", timestamp: Date.now() }],
            lastUpdated: new Date().toISOString(),
          },
        };

      case "DECREMENT":
        return {
          state: options.nextState || currentState,
          context: {
            ...context,
            count: context.count - (action.payload?.step || 1),
            history: [...context.history, { type: "DECREMENT", timestamp: Date.now() }],
            lastUpdated: new Date().toISOString(),
          },
        };

      case "RESET":
        return {
          state: options.nextState || currentState,
          context: {
            ...context,
            count: 0,
            history: [...context.history, { type: "RESET", timestamp: Date.now() }],
            lastUpdated: new Date().toISOString(),
          },
        };

      default:
        // –î–ª—è –¥—Ä—É–≥–∏—Ö —Å–æ–±—ã—Ç–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
        return {
          state: options.nextState || currentState,
          context: {
            ...context,
            ...(action.payload || {}),
          },
        };
    }
  },
});
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Immer

`lite-fsm` –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Immer, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Immer, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ —Ä–µ–¥—å—é—Å–µ—Ä–µ:

```ts
import { createMachine } from "lite-fsm";
import { produce } from "immer";

const todoMachine = createMachine({
  config: {
    IDLE: {
      ADD_TODO: null,
      TOGGLE_TODO: null,
      DELETE_TODO: null,
    },
  },
  initialState: "IDLE",
  initialContext: {
    todos: [],
    filter: "all",
  },
  // –†–µ–¥—å—é—Å–µ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Immer
  reducer: (state, action, options) => {
    const nextState = options.nextState || state.state;

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º Immer –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    const nextContext = produce(state.context, (draft) => {
      switch (action.type) {
        case "ADD_TODO":
          draft.todos.push({
            id: Date.now(),
            text: action.payload.text,
            completed: false,
          });
          break;

        case "TOGGLE_TODO":
          const todo = draft.todos.find((t) => t.id === action.payload.id);
          if (todo) {
            todo.completed = !todo.completed;
          }
          break;

        case "DELETE_TODO":
          const index = draft.todos.findIndex((t) => t.id === action.payload.id);
          if (index !== -1) {
            draft.todos.splice(index, 1);
          }
          break;

        case "SET_FILTER":
          draft.filter = action.payload.filter;
          break;
      }
    });

    return {
      state: nextState,
      context: nextContext,
    };
  },
});
```

## –≠—Ñ—Ñ–µ–∫—Ç—ã —Å –æ—Ç–º–µ–Ω–æ–π

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ –∏–ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏, –≥–¥–µ –Ω–æ–≤—ã–π —ç—Ñ—Ñ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–º–µ–Ω—è—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `createEffect` —Å —Ç–∏–ø–æ–º `latest`:

```ts
import { createMachine, createEffect } from "lite-fsm";

// –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤
const searchEffect = createEffect({
  type: "latest", // –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–∑–æ–≤ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –¥–æ –∫–æ–Ω—Ü–∞
  effect: async ({ transition, services }, { query }) => {
    // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
    const results = await services.api.search(query);
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é
    transition({ type: "SEARCH_SUCCESS", payload: { results } });
  },
});

const searchMachine = createMachine({
  config: {
    IDLE: {
      SEARCH: "SEARCHING",
    },
    SEARCHING: {
      SEARCH_SUCCESS: "RESULTS",
      SEARCH_ERROR: "ERROR",
      SEARCH: "SEARCHING", // –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
    },
    RESULTS: {
      SEARCH: "SEARCHING",
      CLEAR: "IDLE",
    },
    ERROR: {
      SEARCH: "SEARCHING",
      CLEAR: "IDLE",
    },
  },
  initialState: "IDLE",
  initialContext: {
    query: "",
    results: [],
    error: null,
  },
  effects: {
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ —Å –æ—Ç–º–µ–Ω–æ–π
    SEARCHING: ({ services, transition }, event) => {
      return searchEffect({ services, transition }, event.payload || {});
    },
  },
});
```

## –î–µ–±–∞–≥–≥–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–∞—à–∏–Ω —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª–µ–∑–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:

```ts
import { MachineManager } from "lite-fsm";

// –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
const manager = MachineManager({
  /* –∞–≤—Ç–æ–º–∞—Ç—ã... */
});

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–≥–µ—Ä–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
manager.onTransition((prevState, nextState, action) => {
  console.group("üîÑ State Transition");
  console.log("Action:", action);
  console.log("Previous State:", prevState);
  console.log("Next State:", nextState);
  console.log("Changed:", JSON.stringify(getChanges(prevState, nextState)));
  console.groupEnd();
});

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
function getChanges(prevState, nextState) {
  const changes = {};

  // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤—Å–µ –º–∞—à–∏–Ω—ã
  Object.keys(nextState).forEach((machineName) => {
    const prev = prevState[machineName];
    const next = nextState[machineName];

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
    if (prev.state !== next.state) {
      changes[machineName] = changes[machineName] || {};
      changes[machineName].state = {
        from: prev.state,
        to: next.state,
      };
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    const contextChanges = {};
    let hasContextChanges = false;

    Object.keys(next.context).forEach((key) => {
      if (JSON.stringify(prev.context[key]) !== JSON.stringify(next.context[key])) {
        contextChanges[key] = {
          from: prev.context[key],
          to: next.context[key],
        };
        hasContextChanges = true;
      }
    });

    if (hasContextChanges) {
      changes[machineName] = changes[machineName] || {};
      changes[machineName].context = contextChanges;
    }
  });

  return changes;
}
```

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –º–∞—à–∏–Ω

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ–ª–µ–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `createConfig` –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```ts
import { createMachine, createConfig } from "lite-fsm";

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
const workflowConfig = createConfig({
  DRAFT: {
    SUBMIT: "REVIEW",
    SAVE: null,
    DISCARD: "CANCELLED",
  },
  REVIEW: {
    APPROVE: "APPROVED",
    REJECT: "REJECTED",
    REQUEST_CHANGES: "CHANGES_REQUESTED",
  },
  CHANGES_REQUESTED: {
    SUBMIT: "REVIEW",
    DISCARD: "CANCELLED",
  },
  APPROVED: {
    PUBLISH: "PUBLISHED",
    REVERT: "DRAFT",
  },
  REJECTED: {
    REVERT: "DRAFT",
    DISCARD: "CANCELLED",
  },
  PUBLISHED: {
    ARCHIVE: "ARCHIVED",
    UNPUBLISH: "DRAFT",
  },
  CANCELLED: {
    RESTORE: "DRAFT",
  },
  ARCHIVED: {
    RESTORE: "DRAFT",
  },
});

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—à–∏–Ω—ã
const workflowMachine = createMachine({
  config: workflowConfig,
  initialState: "DRAFT",
  initialContext: {
    id: null,
    content: null,
    comments: [],
    lastModified: null,
    author: null,
  },
  // ...
});
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ `lite-fsm` –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∏ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤. –ö–æ–º–±–∏–Ω–∏—Ä—É—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —á–µ—Ç–∫–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π.
